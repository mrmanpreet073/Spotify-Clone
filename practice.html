<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music </title>
</head>
<style>
    * {
        margin: 0;
        padding: 0;

    }

    body {
        color: white;
        background-color: #201f1f;
    }

    .music-container {
        text-align: center;
        /* border: 2px solid black; */
        height: 70vh;
    }

    .card {
        /* display: flex; */
        margin: auto;
        align-items: center;
        justify-content: center;
        justify-content: center;
        /* border: 2px solid green; */
        background-color: #323232;
        width: 90vw;
        max-height: 300px;
        overflow-y: scroll;
    }

    ul li img {
        padding: 5px;
        height: 40px;
    }

    ul li {
        /* border: 2px solid red; */
        background-color: #7c3f3f;
        margin: 15px;
        gap: 10px;
        border-radius: 5px;
        display: flex;
        white-space: nowrap;
        align-items: center;

    }

    .play-area {
        position: absolute;
        border: 2px solid red;
        bottom: 0;
        width: 100vw;
    }

    .buttons {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
    }
</style>

<body>
    <div class="music-container">
        <h1>All Music</h1>
        <div class="card">
            <ul class="ull">

            </ul>
        </div>
    </div>

    <div class="play-area">
        <div class="buttons">
            <img src="img/previous.svg" alt="">
            <img class="invert" src="img/play.svg" alt="">
            <img src="img/next.svg" alt="">
        </div>
    </div>
    <script>
        let audio=new Audio();

        let playmusic=(track)=>{

        } ;
               console.log('Starting JS');

        async function fetchdata() {
            let response = await fetch('music/sidhu');
            let result = await response.text();
            let div = document.createElement('div');
            div.innerHTML = result;
            let as = div.getElementsByTagName('a')
            let songs = [];

            for (let index = 0; index < as.length; index++) {
                const e = as[index];
                if (e.href.endsWith('.mp3')) {
                    songs.push(e.href.split('sidhu/')[1].replaceAll('%20', ' '));


                }

            }

            for (const song of songs) {
                let songul = document.querySelector('.ull');
                songul.innerHTML = songul.innerHTML + `
                  <li>
                    <div><img class="invert" src="img/play.svg" alt=""></div>
                    <div class="sname">${song}</div>
                    <div></div>
                </li>`;


            }

            Array.from(document.getElementsByTagName('li')).forEach((e) => {

                e.addEventListener('click', () => {
                    console.log(e.querySelector('.sname').innerHTML);

                })


            });

        }

        fetchdata();


    </script>
</body>

</html>